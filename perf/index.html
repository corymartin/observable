<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Observable.js Performance Tests/Observations</title>
</head>
<body>
  <script src="../lib/observable.js"></script>
  <script>
  void function() {
    var obs;

    var beforeEach = function() {
      obs = observable();
      for (var i = 50; i--;) {
        obs.on('test', function(){});
      }
    };

    var test = function(name, callback) {
      beforeEach();
      var cnt = 500000;
      console.time(name);
      while (cnt--) {
        callback();
      }
      console.timeEnd(name);
    };

    // #on
    test('#on() add single callback', function() {
      obs.on('test', function(){});
    });
    test('#on() add multiple callbacks', function() {
      obs.on('test', function(){}, function(){}, function(){});
    });
    test('#on() add array of callbacks', function() {
      obs.on('test', [function(){}, function(){}, function(){}]);
    });

    // #off
    test('#off() remove single callback', function() {
      obs.off('test', function(){});
    });
    test('#off() remove multiple callbacks', function() {
      obs.off('test', function(){}, function(){}, function(){});
    });
    test('#off() remove array of callbacks', function() {
      obs.off('test', [function(){}, function(){}, function(){}]);
    });
  }();
  </script>
</body>
</html>
